# 性能优化

一般来说遇到前端的性能问题，我分为局部优化和全链路的优化。
性能问题也是个 ROI 权衡的问题，因为一般来说，基本的优化都做了。优化都是空间换时间、或者带宽等资源的互换，这个时候要做 ABtest 进行评估优化的性能价值。

# 局部优化

首屏性能优化

- 可以借助 chrome 的 devtool 工具 lighthouse，进行分析。
- 一般的手段有:

  - ssr
  - 减少服务器请求
  - http2
  - 骨架屏

## 全链路优化

- 从整个 url 请求到页面呈现的过程可能存在的性能问题优化
  - 如 DNS 的预请求、缓存
  - http/tcp，使用 h2,和一些缓存策略
    - 减少体积
      - 压缩代码
      - treeShaking
      - 0px 的 px 处理
      - 请求的 gzip 压缩
      - cdn
  - 文档解析
    - 避免 js 的阻塞构建 renderTree
- 指标
  - FCP--第一个模块渲染
  - LCP--最大的模块渲染
  - FID--首次输入延时
  - TTI--页面全渲染，用户可以操作
    - 第三方包--web-vitals
    - paint-timing API 可以自己实现
  - CLS -- 累计布局转移
